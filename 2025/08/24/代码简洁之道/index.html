<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="一本很好的介绍编写代码的书，其中的一些思想对开发来说影响很大">
<meta property="og:type" content="article">
<meta property="og:title" content="代码简洁之道">
<meta property="og:url" content="http://example.com/2025/08/24/%E4%BB%A3%E7%A0%81%E7%AE%80%E6%B4%81%E4%B9%8B%E9%81%93/index.html">
<meta property="og:site_name" content="llw&#39;s blog">
<meta property="og:description" content="一本很好的介绍编写代码的书，其中的一些思想对开发来说影响很大">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-08-24T08:36:02.000Z">
<meta property="article:modified_time" content="2025-10-09T08:16:59.855Z">
<meta property="article:author" content="llw">
<meta property="article:tag" content="开发">
<meta property="article:tag" content="阅读">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2025/08/24/%E4%BB%A3%E7%A0%81%E7%AE%80%E6%B4%81%E4%B9%8B%E9%81%93/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>代码简洁之道 | llw's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">llw's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">心之所向 素履以往</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">37</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">12</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">53</span></a>

  </li>
  </ul>
</nav>




</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/24/%E4%BB%A3%E7%A0%81%E7%AE%80%E6%B4%81%E4%B9%8B%E9%81%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="llw">
      <meta itemprop="description" content="des">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="llw's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          代码简洁之道
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-08-24 16:36:02" itemprop="dateCreated datePublished" datetime="2025-08-24T16:36:02+08:00">2025-08-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-10-09 16:16:59" itemprop="dateModified" datetime="2025-10-09T16:16:59+08:00">2025-10-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>一本很好的介绍编写代码的书，其中的一些思想对开发来说影响很大</p>
<span id="more"></span>
<p>书籍链接：</p>
<p><a target="_blank" rel="noopener" href="https://awesome-programming-books.github.io/clean-code/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93.pdf">https://awesome-programming-books.github.io/clean-code/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93.pdf</a></p>
<h1 id="有意义命名"><a href="#有意义命名" class="headerlink" title="有意义命名"></a>有意义命名</h1><h3 id="名副其实"><a href="#名副其实" class="headerlink" title="名副其实"></a>名副其实</h3><p>好的名称是不需要注释来补充解释干了啥，名称应该可以回答为什么存在，做了什么事，应该如何使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Cell&gt; <span class="title function_">getFlaggedCells</span><span class="params">()</span>&#123;</span><br><span class="line">	List&lt;Cell&gt; flaggedCells = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Cell&gt;();</span><br><span class="line">  <span class="keyword">for</span> (Cell cell : gameBoard)&#123;</span><br><span class="line">    <span class="keyword">if</span> (cell.isFlagged())&#123;</span><br><span class="line">      flaggedCells.add(cell);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> flaggedCells</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>列表名flaggedCells, 临时变量名cell</li>
<li>用一个单独的累来表示单个格子Cell， 用isFlagged方法来把魔法数的判断逻辑收敛到更小的维度</li>
</ul>
<h3 id="避免误导"><a href="#避免误导" class="headerlink" title="避免误导"></a>避免误导</h3><p>少用List，Set之类的，除非本身的数据结构就是List等</p>
<p>命名尽量区分度更高，相似的命名不好区分</p>
<h3 id="做有意义的区分"><a href="#做有意义的区分" class="headerlink" title="做有意义的区分"></a>做有意义的区分</h3><p>Info 和 Data 就像a, an, the一样，是意义含混的废话，要区分名称，就需要站在读者的角度看看是不是能够区分出来两个的不同之处</p>
<h3 id="使用读得出来的名称"><a href="#使用读得出来的名称" class="headerlink" title="使用读得出来的名称"></a>使用读得出来的名称</h3><p>尽量使用单词的全称而不是一个字母啥的（其实我觉得xx2xx, xx4xx其实都不是很合适的）</p>
<h3 id="避免使用编码"><a href="#避免使用编码" class="headerlink" title="避免使用编码"></a>避免使用编码</h3><p>使用更小的类，更短的方法，好让每个变量的定义都在视野范围之内</p>
<p>没必要使用<code>m_</code>前缀来表示成员变量，代码读的越多，眼中就越没有前缀</p>
<p>接口实现抽象类尽量使用<code>ShapeFactoryImpl</code>而不是<code>IShapeFactory</code>，前面的<code>I</code>就等于废话</p>
<h3 id="类名"><a href="#类名" class="headerlink" title="类名"></a>类名</h3><p>应该是名词或者名词短语，而不是动词。避免使用Manager, Processor, Data, Info 等类名</p>
<h3 id="方法名"><a href="#方法名" class="headerlink" title="方法名"></a>方法名</h3><p>应该是动词或者动词短语</p>
<h3 id="添加有意义的语境"><a href="#添加有意义的语境" class="headerlink" title="添加有意义的语境"></a>添加有意义的语境</h3><p>比如可以在地址类型的变量之前加一个<code>addr</code>：<code>addrFirstName</code>, <code>addrState</code> </p>
<h3 id="不要添加没有意义的语境"><a href="#不要添加没有意义的语境" class="headerlink" title="不要添加没有意义的语境"></a>不要添加没有意义的语境</h3><p>有的时候大家都知道这个是什么应用是做啥的，没有必要所有的类前面都加一个前缀</p>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h3 id="短小"><a href="#短小" class="headerlink" title="短小"></a>短小</h3><p>常见的说法是函数应该小于1屏，那是上个世纪的说法，现在来说最好是20行封顶为最佳（这个也是一个习惯，配合好的函数名称，把一些复杂的逻辑分解为不同的函数，然后pack起来才是最合适的）</p>
<p>if, else, while等语句，其中的代码应该只有一行，这一行大抵是一个函数调用的语句</p>
<h3 id="只做一件事"><a href="#只做一件事" class="headerlink" title="只做一件事"></a>只做一件事</h3><p>函数应该只做一件事，做好这一件事就ok了。如何判断函数是否做了不止一件事，可以看是否能再拆出一个函数，或者说只做一件事的函数无法被合理的切分为多个区段。</p>
<h3 id="每个函数一个抽象层级"><a href="#每个函数一个抽象层级" class="headerlink" title="每个函数一个抽象层级"></a>每个函数一个抽象层级</h3><p>代码拥有自顶向下的阅读顺序，每个函数后面都跟着位于下一层级的函数，为了在看函数列表的时候可以跟抽象层级向下阅读。</p>
<h3 id="switch语句"><a href="#switch语句" class="headerlink" title="switch语句"></a>switch语句</h3><p>不光是switch，还有if/else等，其实写出短小的语句是很难的，而且只做一件事的switch语句也很难，所以可以使用多态来实现这点</p>
<p>而且很容易违反单一责任原则SRP、开放闭合原则OCP</p>
<p>解决方法就是将switch语句埋到抽象工厂底下，不让别人看见，case里面到不同函数的实现由不同的实体去实现，而不是放在case里面</p>
<h3 id="使用描述性名称"><a href="#使用描述性名称" class="headerlink" title="使用描述性名称"></a>使用描述性名称</h3><p>函数越小，功能越集中，就越好取名字</p>
<p>函数名长点也无所谓，主要是需要有描述性。命名方式保持一致，使用与模块名一脉相承的短语，名词，动词给函数命名，</p>
<p><code>includeSetupAndTearDownPages</code>, <code>includeSetupPages</code>, <code>includeTearDownPages</code></p>
<h3 id="函数参数"><a href="#函数参数" class="headerlink" title="函数参数"></a>函数参数</h3><p>最理想的参数数量是0，其次是1，再次是2，应该避免3，尽量不要一个函数多个参数</p>
<p>解决方法就是时间event，将函数抽象看作是一个事件，使用事件作为参数来修改系统的状态</p>
<p>如果函数需要两个，三个，或者三个以上的参数，说明其中的一些参数需要被封装为类类，特别好理解这个：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Circle <span class="title function_">makeCircle</span><span class="params">(<span class="type">double</span> x, <span class="type">double</span> y, <span class="type">double</span> radius)</span>;</span><br><span class="line">Circle <span class="title function_">makeCircle</span><span class="params">(Point center, <span class="type">double</span> radius)</span>;</span><br></pre></td></tr></table></figure>
<h3 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h3><p>取一个好的名字，使用名词/动词对的形式，例如</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">write(name) - writeFiled(name)</span><br></pre></td></tr></table></figure>
<p>可以把参数的名称编码为函数名：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">assertEqual();</span><br><span class="line">assertExpectedEqualActual(expected, actual);</span><br></pre></td></tr></table></figure>
<h3 id="无副作用"><a href="#无副作用" class="headerlink" title="无副作用"></a>无副作用</h3><p>关键还是只做一件事，别在里面带上一些别的操作，或者在名称上就只出这个函数干的所有事情，不要给后人带来误解</p>
<h3 id="输出参数"><a href="#输出参数" class="headerlink" title="输出参数"></a>输出参数</h3><p>尽量避免使用输出参数，如果要修改状态就直接修改所属对象的状态</p>
<h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><p>假设是一个链的函数调用，有时候可能就会导致更深层次的嵌套结构，例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (delete(page) == E_OK)&#123;</span><br><span class="line">	<span class="keyword">if</span> (deleteReferrencePage(page.name) == E_OK)&#123;</span><br><span class="line">    <span class="keyword">if</span> (deleteKey(page.name.makeKey()) == E_OK)&#123;</span><br><span class="line">      logger.log(<span class="string">&quot;page deleted&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      logger.log(<span class="string">&quot;delete key failed&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    logger.log(<span class="string">&quot;deleteReference failed&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  logger.log(<span class="string">&quot;delete failed&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这就是典型的💩，如果有catch的语言，就直接抓错误就行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">	delete(page);</span><br><span class="line">  deleteReferrencePage(page.name);</span><br><span class="line">  deleteKey(page.name.makeKey());</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">  logger.log(e.getMessage());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果是golang这样的，就直接及时返回</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> err = <span class="built_in">delete</span>(page); err != <span class="literal">nil</span>&#123;</span><br><span class="line">	log.<span class="built_in">println</span>(ctx, <span class="string">&quot;delete page fail&quot;</span>)</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> err = deleteReferrencePage(page.name); err != <span class="literal">nil</span>&#123;</span><br><span class="line">  log.<span class="built_in">println</span>(ctx, <span class="string">&quot;delete referrence page fail&quot;</span>)</span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h3 id="抽离Try-Catch代码块"><a href="#抽离Try-Catch代码块" class="headerlink" title="抽离Try/Catch代码块"></a>抽离Try/Catch代码块</h3><p>把try/catch从主代码的逻辑中抽离出来，形成另外的函数，做好代码的逻辑隔离</p>
<h3 id="别重复自己"><a href="#别重复自己" class="headerlink" title="别重复自己"></a>别重复自己</h3><h1 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h1><p><strong>什么都不会比放置良好的注释来得有用，也没有什么比乱七八糟的注释更有本事搞乱一个模块，也没有什么比陈旧、提供错误的信息的注释更有破坏性</strong></p>
<p><strong>如果你需要写注释，再想想看能不能用代码来表达</strong></p>
<h3 id="好注释"><a href="#好注释" class="headerlink" title="好注释"></a>好注释</h3><p>法律信息：copyright</p>
<p>提供基本信息（尽量使用函数的名称来表示返回的值或者需要的值等）</p>
<p>对意图的解释（比如简单说一下采用这个解决方案的理由，来对一段方案进行解释）</p>
<p>阐释</p>
<p>警示（告诉其他程序员回出现某种后果的注释）</p>
<p>TODO（相当于工作列表，你认为有必要的功能但是还没有做的功能，但是肯定有todo不是很好的，需要定期去查看然后去完成，之后清理todo）</p>
<h3 id="坏注释"><a href="#坏注释" class="headerlink" title="坏注释"></a>坏注释</h3><ul>
<li>喃喃自语：<strong>如果只是因为你觉得应该因为过程需要就添加注释，就是没必要的</strong></li>
<li>多余的注释：与其解释一大段还不如让读者自己去看代码，代码或者比文字更有说服力</li>
<li>误导性注释：还是那个问题，与其保证代码任何功能，还不如让使用者自己去看代码来的放心</li>
<li>循规式注释</li>
<li>日志式注释：修改记录就没必要记了，都有git的</li>
<li>废话：简单的函数一眼可以看出来的就没必要注释了</li>
</ul>
<h1 id="类"><a href="#类" class="headerlink" title="类"></a>类</h1><p>类中的顺序：</p>
<ul>
<li>变量列表<ul>
<li>公共静态常量</li>
<li>私有静态变量</li>
<li>私有实体变量</li>
<li>公共变量</li>
</ul>
</li>
<li>公共函数<ul>
<li>公共函数调用的私有函数紧随在公共函数后面</li>
</ul>
</li>
</ul>
<h3 id="类应该短小"><a href="#类应该短小" class="headerlink" title="类应该短小"></a>类应该短小</h3><p>这里有一个理解是<strong>类的权责</strong>，什么是权责？我理解就是分为两部分，权利与责任</p>
<p>权利：类能做的范围，可以是类具备的能力，可以调用的方法，能操作的对象范围</p>
<p>责任：类该做的事情，也就是类存在的意义</p>
<p>一个好的类应该是权与责对等的，</p>
<p>比如举个例子</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">    ID   <span class="type">int</span></span><br><span class="line">    Name <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *User)</span></span> CreateOrder(items []Item) <span class="type">error</span> &#123;</span><br><span class="line">    <span class="comment">// 直接写数据库创建订单</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>权利过大，责任过小，会导致（God Object），然后很多事情都会用到这个类，导致代码的耦合度过高，从而难以维护</p>
<p>责任过大，权利过小，例如一个类有很多逻辑，然后还需要依赖于全局变量或者别的类才能工作，就很容易出bug，测试起来不好发现问题</p>
<p>如何设计一个权责平衡的类呢？</p>
<h4 id="单一权责原则SRP"><a href="#单一权责原则SRP" class="headerlink" title="单一权责原则SRP"></a>单一权责原则SRP</h4><p>类或类的模块有且<strong>只有一条</strong>加以修改的理由</p>
<p>修改的理由可以理解为这个类会因为外部需求的变化而修改的动机，例如</p>
<ul>
<li>业务逻辑的变化（例如某个数据的计算逻辑发生改变了）</li>
<li>展示或存储方式的变化（例如保存为excel变为了json）</li>
<li>框架或者库的更新（例如改数据库驱动）</li>
</ul>
<p>也就是说：一个类只做一件事情，而且那件事情的改变，只会让这一个类发生改变</p>
<p><strong>系统应该由许多短小的类而不是少量巨大的类组成。</strong>每个小类封装一个权责，只有一个修改的原因，并与其它少数类一起协同达成期望的系统行为</p>
<h4 id="内聚"><a href="#内聚" class="headerlink" title="内聚"></a>内聚</h4><p>方法操作的变量越多，越容易黏聚到类上，内聚越高，越说明类中的方法和变量相互依赖、互相结合成一个逻辑整体</p>
<p>高内聚就是让类中的方法都是在做一件事，比如：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> EmailService <span class="keyword">struct</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *EmailService)</span></span> Send(to <span class="type">string</span>, msg <span class="type">string</span>) &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *EmailService)</span></span> AddSignature(msg <span class="type">string</span>) <span class="type">string</span> &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *EmailService)</span></span> ValidateAddress(address <span class="type">string</span>) <span class="type">bool</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>如何做一个高内聚的类？</p>
<ul>
<li>按功能聚合方法（相同的逻辑放在一个类中）</li>
<li>减少不相关字段（属性应该服务于核心的功能）</li>
<li>封装变化点（把变化的逻辑单独抽出来）</li>
<li>通过接口抽象不同的角色</li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%BC%80%E5%8F%91/" rel="tag"># 开发</a>
              <a href="/tags/%E9%98%85%E8%AF%BB/" rel="tag"># 阅读</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/05/23/dp/" rel="prev" title="动态规划">
      <i class="fa fa-chevron-left"></i> 动态规划
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/08/28/Agent%E5%BC%80%E5%8F%91/" rel="next" title="Agent开发">
      Agent开发 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9C%89%E6%84%8F%E4%B9%89%E5%91%BD%E5%90%8D"><span class="nav-number">1.</span> <span class="nav-text">有意义命名</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8D%E5%89%AF%E5%85%B6%E5%AE%9E"><span class="nav-number">1.0.1.</span> <span class="nav-text">名副其实</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%81%BF%E5%85%8D%E8%AF%AF%E5%AF%BC"><span class="nav-number">1.0.2.</span> <span class="nav-text">避免误导</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%81%9A%E6%9C%89%E6%84%8F%E4%B9%89%E7%9A%84%E5%8C%BA%E5%88%86"><span class="nav-number">1.0.3.</span> <span class="nav-text">做有意义的区分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E8%AF%BB%E5%BE%97%E5%87%BA%E6%9D%A5%E7%9A%84%E5%90%8D%E7%A7%B0"><span class="nav-number">1.0.4.</span> <span class="nav-text">使用读得出来的名称</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8%E7%BC%96%E7%A0%81"><span class="nav-number">1.0.5.</span> <span class="nav-text">避免使用编码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%90%8D"><span class="nav-number">1.0.6.</span> <span class="nav-text">类名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E5%90%8D"><span class="nav-number">1.0.7.</span> <span class="nav-text">方法名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E6%9C%89%E6%84%8F%E4%B9%89%E7%9A%84%E8%AF%AD%E5%A2%83"><span class="nav-number">1.0.8.</span> <span class="nav-text">添加有意义的语境</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8D%E8%A6%81%E6%B7%BB%E5%8A%A0%E6%B2%A1%E6%9C%89%E6%84%8F%E4%B9%89%E7%9A%84%E8%AF%AD%E5%A2%83"><span class="nav-number">1.0.9.</span> <span class="nav-text">不要添加没有意义的语境</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">2.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%AD%E5%B0%8F"><span class="nav-number">2.0.1.</span> <span class="nav-text">短小</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AA%E5%81%9A%E4%B8%80%E4%BB%B6%E4%BA%8B"><span class="nav-number">2.0.2.</span> <span class="nav-text">只做一件事</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AF%8F%E4%B8%AA%E5%87%BD%E6%95%B0%E4%B8%80%E4%B8%AA%E6%8A%BD%E8%B1%A1%E5%B1%82%E7%BA%A7"><span class="nav-number">2.0.3.</span> <span class="nav-text">每个函数一个抽象层级</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#switch%E8%AF%AD%E5%8F%A5"><span class="nav-number">2.0.4.</span> <span class="nav-text">switch语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%8F%8F%E8%BF%B0%E6%80%A7%E5%90%8D%E7%A7%B0"><span class="nav-number">2.0.5.</span> <span class="nav-text">使用描述性名称</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="nav-number">2.0.6.</span> <span class="nav-text">函数参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E5%90%8D"><span class="nav-number">2.0.7.</span> <span class="nav-text">命名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A0%E5%89%AF%E4%BD%9C%E7%94%A8"><span class="nav-number">2.0.8.</span> <span class="nav-text">无副作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E5%8F%82%E6%95%B0"><span class="nav-number">2.0.9.</span> <span class="nav-text">输出参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">2.0.10.</span> <span class="nav-text">异常处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%BD%E7%A6%BBTry-Catch%E4%BB%A3%E7%A0%81%E5%9D%97"><span class="nav-number">2.0.11.</span> <span class="nav-text">抽离Try&#x2F;Catch代码块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%AB%E9%87%8D%E5%A4%8D%E8%87%AA%E5%B7%B1"><span class="nav-number">2.0.12.</span> <span class="nav-text">别重复自己</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B3%A8%E9%87%8A"><span class="nav-number">3.</span> <span class="nav-text">注释</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A5%BD%E6%B3%A8%E9%87%8A"><span class="nav-number">3.0.1.</span> <span class="nav-text">好注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9D%8F%E6%B3%A8%E9%87%8A"><span class="nav-number">3.0.2.</span> <span class="nav-text">坏注释</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B1%BB"><span class="nav-number">4.</span> <span class="nav-text">类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%BA%94%E8%AF%A5%E7%9F%AD%E5%B0%8F"><span class="nav-number">4.0.1.</span> <span class="nav-text">类应该短小</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%95%E4%B8%80%E6%9D%83%E8%B4%A3%E5%8E%9F%E5%88%99SRP"><span class="nav-number">4.0.1.1.</span> <span class="nav-text">单一权责原则SRP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%85%E8%81%9A"><span class="nav-number">4.0.1.2.</span> <span class="nav-text">内聚</span></a></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">llw</p>
  <div class="site-description" itemprop="description">des</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">53</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">37</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">llw</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
